import java.util.*;
import java.io.*;

public class Evans_Cube {

	/*
                   53 52 51
                   50 49 48
                   47 46 45

         9 10 11   0  1  2  27 28 29  18 19 20
        12 13 14   3  4  5  30 31 32  21 22 23
        15 16 17   6  7  8  33 34 35  24 25 26

                   36 37 38
                   39 40 41
                   42 43 44
	*/

	public static void main(String[] args) {
		Scanner in = new Scanner(System.in);

		char[] cube = new char[54];
		for (int i = 0; i < 54; i += 3) {
			String line = in.nextLine();
			cube[i] = line.charAt(0); cube[i + 1] = line.charAt(1); cube[i + 2] = line.charAt(2);
		}

		Map<Integer, int[][]> mp = new HashMap<Integer, int[][]>();
		mp.put(1, new int[][] {
			{0, 2}, {1, 5}, {2, 8}, {3, 1}, {5, 7}, {6, 0}, {7, 3}, {8, 6},
			{11, 45}, {14, 46}, {17, 47}, {27, 38}, {30, 37}, {33, 36}, {36, 11}, {37, 14}, {38, 17}, {45, 33}, {46, 30}, {47, 27}});
		mp.put(2, new int[][] {
			{9, 11}, {10, 14}, {11, 17}, {12, 10}, {14, 16}, {15, 9}, {16, 12}, {17, 15},
			{0, 36}, {3, 39}, {6, 42}, {20, 47}, {23, 50}, {26, 53}, {36, 26}, {39, 23}, {42, 20}, {47, 6}, {50, 3}, {53, 0}});
		mp.put(3, new int[][] {
			{18, 20}, {19, 23}, {20, 26}, {21, 19}, {23, 25}, {24, 18}, {25, 21}, {26, 24},
			{9, 42}, {12, 43}, {15, 44}, {29, 53}, {32, 52}, {35, 51}, {42, 35}, {43, 32}, {44, 29}, {51, 9}, {52, 12}, {53, 15}});
		mp.put(4, new int[][] {
			{27, 29}, {28, 32}, {29, 35}, {30, 28}, {32, 34}, {33, 27}, {34, 30}, {35, 33},
			{2, 51}, {5, 48}, {8, 45}, {18, 44}, {21, 41}, {24, 38}, {38, 2}, {41, 5}, {44, 8}, {45, 18}, {48, 21}, {51, 24}});
		mp.put(5, new int[][] {
			{36, 38}, {37, 41}, {38, 44}, {39, 37}, {41, 43}, {42, 36}, {43, 39}, {44, 42},
			{6, 33}, {7, 34}, {8, 35}, {15, 6}, {16, 7}, {17, 8}, {24, 15}, {25, 16}, {26, 17}, {33, 24}, {34, 25}, {35, 26}});
		mp.put(6, new int[][] {
			{45, 47}, {46, 50}, {47, 53}, {48, 46}, {50, 52}, {51, 45}, {52, 48}, {53, 51},
			{0, 9}, {1, 10}, {2, 11}, {9, 18}, {10, 19}, {11, 20}, {18, 27}, {19, 28}, {20, 29}, {27, 0}, {28, 1}, {29, 2}});

		int Q = in.nextInt(); in.nextLine();
		for (int i = 0; i < Q; i++) {
			String cmd = in.nextLine();
			char[] copy = cube.clone();

			int dir = cmd.charAt(1) == 'C' ? 1 : 0;
			for (int[] j : mp.get(cmd.charAt(0) - '0')) {
				copy[j[dir]] = cube[j[dir ^ 1]];
			}
			cube = copy.clone();
		}

		for (int i = 0; i < 54; i += 9) {
			boolean same = true;
			for (int j = i; j < i + 8; j++) same &= cube[j] == cube[j + 1];
			if (!same) {
				System.out.println("Boo!");
				return;
			}
		}
		System.out.println("Solved!");
	}

}

